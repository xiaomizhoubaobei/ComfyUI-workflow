# wyrde 的基础 WAS 节点工作流
这是一个使用多个 WAS 节点的工作流。

<img src="./wyrde was node basic.png" width="80%" align="middle">

## 切换节点
工作流使用连线（节点之间的线）在图像到图像和文本到图像之间切换，以及在内置 VAE 和加载的 VAE 之间切换。
* 要从图像到图像切换到文本到图像，从"_空潜空间图像_"节点上的 LATENT 点拖动一条连线到蓝色框中的重定向节点。（旧连线被替换。）
* 通过从 VAE 编码框上的 LATENT 点拖动到重定向节点切换回来。

<img src="wyrde was basic img2img switch.png" width="80%" align="middle">
<img src="wyrde was node basic move2.png" width="80%" align="middle">
<img src="wyrde was node basic move3.png" width="80%" align="middle">

从内置 VAE 切换到加载的 VAE 是类似的。（内置 VAE 包含在模型文件内。）
* 从 VAE 加载器节点中的 VAE 点拖动一条连线到下方的紫色重定向节点。
* 要更改回来，从简单检查点加载器节点中的 VAE 点拖动一条连线到下方的紫色重定向节点。
<img src="./wyrde was basic vae switch.png" width="80%" align="middle">

## 在稳定扩散中，大小确实重要
使用图像到图像时，应该调整图像大小以更好地适应模型。大多数模型设计用于 512x512 的初始生成。768x512 和 512x768 也很常见。

大图像在第一次生成期间也会消耗显存和时间。与其在稳定扩散中创建大图像，不如通过一个称为高分辨率修复的过程。这是另一个时间的话题，但对于这个基础工作流，坚持使用较小的初始图像。（这可以很容易更改以进行实验。）

回到图像到图像。
* 使用调整图像大小节点。该节点最初配置为将图像调整为 512x768。最好在其他程序中裁剪/更改图像，使其适合 1:1 或 1:2 比例以便于缩放。（可以使用节点更改图像，但这是一个更高级的主题。）如果比例不完美也没关系，图像只是一个指南。越接近越好。
* 节点的"模式"可以从"调整大小"更改为"重新缩放"，以便轻松减小较大的图像。<img src="./wyrde was basic img resize.png" width="80%" align="middle">


## 提示词
工作流包括一些基本提示词。提示词分为两种类型，正面和负面。<img src="./wyrde was basic prompts.png" align="middle">
* 正面提示词是您希望在结果中看到的内容。
  - （正面提示词通常简称为提示词，但有时提示词意味着正面和负面提示词。令人困惑？欢迎来到稳定扩散！）
* 负面提示词是用户希望不在结果中出现的项目。
* 有各种关于制作好提示词的指南。
  - 基本上，好的提示词有一个主题和条件。
  - 主题是结果中期望的主要内容，例如`可爱的猫女孩穿着条纹比基尼`
  - 条件是关于主题或期望的图像类型的更多细节。`详细的眼睛，详细的头发，柔和的头发，`给出关于主题的更多细节。
  - `荒谬分辨率，鲜艳，照片，摄影照片，上镜，三分法，动漫，插画，中景，阿祖莱霍瓷砖，精细细节，写实，杰作，最佳质量，插画，柔焦，HDR 8K，艺术站，pixiv，虚幻引擎 5，安全内容，` 是关于期望的图像类型的大量信息。
    + 顺便说一句，阿祖莱霍瓷砖是葡萄牙瓷砖，可以为许多模型的图像添加有趣的风格。
  - 负面提示词通常短得多。通常。存在一些真正糟糕的提示词，通常是为了对抗结果中出现的特定事物。对于基础，`坏手，不安全内容，裸体`做得很好。可以删除其中一些以获得更大胆的图像。（：
    + 稳定扩散通常是一个固执的野兽，似乎与负面提示词进行激烈的斗争。

## 单击队列提示
最重要的部分当然是制作图像。单击队列提示开始该过程。如果 ComfyUI 不喜欢节点的连线方式，将出现明亮的红色错误。
如果它喜欢，各种节点在处理过程中会发出绿光。最终，一张图片会出现在最末端。

## 附加功能
末尾的按因子潜空间放大（WAS）和第二个图像调整大小是干什么用的？它们在那里使得很容易连接高分辨率修复。另外，我就是想这样做。目前它们没有做太多。更改因子可以轻松增加最终图像大小，但不会看起来很棒。

### 高分辨率修复的基础：
* 将图像保存节点进一步向右移动。Shift 单击或 ctrl+拖动以选择多个节点。
* 将它们移动得远一点。也许再远一点。
* 空格键可用于平移，即使节点被"抓住"。
* 按住 shift 将选定的节点对齐到网格。
  - 网格大小可以在主队列提示框的齿轮中配置。
* 现在单击空白空间以取消选择节点。
* 返回 K 采样器（WAS）节点
* 如果潜空间放大节点留在它旁边，那就好了！如果没有，将其移回。
* 将因子更改为 2。
* 现在选择 K 采样器节点。Ctrl+C 复制它。
* 单击潜空间放大节点右侧的空白空间。Ctrl+V 粘贴采样器。
  - 将去噪更改为大约 `0.400`。（小数非常重要™）
  - 对于非常基本的高分辨率修复，其他设置都可以。
* 将潜空间放大上的 LATENT 点连接到新 K 采样器上的潜空间图像点。将来自原始 K 采样器左侧各种对象的其他连线连接起来。
  - 使用更多重定向来管理连线可获得加分。Ctrl+C 和 V 复制粘贴重定向。
  - 重定向抓取点有点小问题。目标是上半部分。
* 将新 K 采样器上的 LATENT 点连接到 VAE 解码节点上的样本点（如果之前没有断开，旧连线就会消失）。
* 单击队列提示以"修复"先前的图像。如果 ComfyUI 在某点没有重新启动，它将使用旧数据并从新 K 采样器开始。否则它将从头开始。
* 结果图像更大，会看起来有点不同（它被采样了），并且质量不错。


## 资源

WAS 节点
* https://github.com/WASasquatch/was-node-suite-comfyui

模型
* https://civitai.com/models/8281/perfect-world

关于 VAE 的信息
* https://rentry.org/sdvae

寻找模型和其他稳定扩散好物的地方
* https://civitai.com/
* https://huggingface.co/